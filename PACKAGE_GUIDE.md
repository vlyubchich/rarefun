# rarefun Package Development Guide

## Package Structure Created

The rarefun package has been set up with the following structure:

### Core Package Files
- **DESCRIPTION**: Package metadata with author information
  - Vyacheslav Lyubchich (Maintainer, ORCID: 0000-0001-7936-4285)
  - Genevi√®ve Nesslage (Author, ORCID: 0000-0003-1770-6803)
- **NAMESPACE**: Package namespace (to be generated by roxygen2)
- **LICENSE**: Apache License 2.0
- **LICENSE.md**: License reference file
- **README.md**: Package overview and usage guide
- **NEWS.md**: Changelog for package versions

### Source Code
- **R/**: Contains all package functions
  - `rarefun-package.R`: Package-level documentation
  - `rare_iforest.R`: Isolation Forest anomaly detection
  - `rare_dbscan.R`: DBSCAN-based anomaly detection
  - `rare_residuals.R`: Residual-based anomaly detection
  - `match_spatial_points.R`: Spatial point matching
  - `extract_ts.R`: Time series extraction
  - `contingency_chisq.R`: Chi-square tests
  - `gof_qr.R`: Goodness-of-fit tests
  - `mcc.R`: Matthews Correlation Coefficient
  - `partial_qrf.R`: Partial quantile random forest
  - `kneedle.R`: Knee point detection

### Documentation
- **man/**: Documentation files (will be auto-generated)
- **vignettes/**: Package vignettes
  - `getting-started.Rmd`: Introduction vignette

### Testing
- **tests/**: Test suite
  - `testthat.R`: Test runner
  - `testthat/`: Test files directory

### Other Directories
- **data/**: For package datasets
- **dev/**: Development scripts (excluded from package)

### Configuration Files
- **rarefun.Rproj**: RStudio project file
- **.Rbuildignore**: Files to exclude from package build
- **.gitignore**: Git ignore patterns (already existed)

## Next Steps

### 1. Generate Documentation
Run in R:
```r
# Install required packages
install.packages(c("roxygen2", "devtools", "testthat"))

# Load the package development tools
library(devtools)

# Generate documentation from roxygen comments
document()
```

### 2. Check Package
```r
# Run package checks
check()
```

### 3. Install and Test
```r
# Install the package locally
install()

# Load and test
library(rarefun)
```

### 4. Build Package
```r
# Build source package
build()

# Build binary package
build(binary = TRUE)
```

### 5. Add Tests
Create test files in `tests/testthat/` with names like:
- `test-rare_iforest.R`
- `test-rare_dbscan.R`
- etc.

### 6. Update Dependencies
Review and update the `Imports` field in DESCRIPTION based on actual package dependencies used in your functions.

### 7. Add Example Data (Optional)
If you have example datasets, add them to `data/` and document them in `R/data.R`.

## Common Commands

### Development Workflow
```r
# Load all package functions
devtools::load_all()

# Run tests
devtools::test()

# Check package
devtools::check()

# Build vignettes
devtools::build_vignettes()

# Install package
devtools::install()
```

### Documentation
```r
# Update documentation
devtools::document()

# Preview documentation
?rare_iforest
```

### GitHub/Version Control
```r
# Use version control features
usethis::use_git()

# Set up GitHub
usethis::use_github()
```

## Package Dependencies

Based on the function files, ensure these packages are listed in DESCRIPTION:
- isotree (for Isolation Forest)
- dbscan (for DBSCAN clustering)
- parallel (for parallel processing)

Add others as needed for your specific functions.

## Resources

- [R Packages Book](https://r-pkgs.org/)
- [Writing R Extensions](https://cran.r-project.org/doc/manuals/r-release/R-exts.html)
- [roxygen2 Documentation](https://roxygen2.r-lib.org/)
- [testthat Documentation](https://testthat.r-lib.org/)

## Contact

- Vyacheslav Lyubchich: lyubchich@umces.edu
- GitHub: https://github.com/vlyubchich/rarefun
